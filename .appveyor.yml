image:
  - Visual Studio 2019
  - Visual Studio 2017

branches:
  only:
  - master

configuration: Release

platform:
  - x64
  - x32

install:
-  ps: |

     if (![IO.File]::Exists("C:\cmake-3.17.0\bin\cmake.exe")) {
       Start-FileDownload 'https://github.com/Kitware/CMake/releases/download/v3.17.0/cmake-3.17.0-win64-x64.zip'
       7z x -y cmake-3.17.0-win64-x64.zip -oC:\cmake-3.17.0
       move ..\..\cmake-3.17.0\cmake-3.17.0-win64-x64\bin ..\..\cmake-3.17.0
       move ..\..\cmake-3.17.0\cmake-3.17.0-win64-x64\share ..\..\cmake-3.17.0
       move ..\..\cmake-3.17.0\cmake-3.17.0-win64-x64\man ..\..\cmake-3.17.0
       move ..\..\cmake-3.17.0\cmake-3.17.0-win64-x64\doc ..\..\cmake-3.17.0
     }
     $env:PATH="C:\cmake-3.17.0\bin;$env:PATH"
     cmake --version

cache: 
  - C:\cmake-3.17.0

build_script:
- ps: .\build.ps1
  #-  mkdir cmake-build
  #-  cd cmake-build
  #-  cmake -G Ninja -DCMAKE_BUILD_TYPE=Release -DBUILD_TESTS=ON ..
  #-  cmake --build .